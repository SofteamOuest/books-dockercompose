version: "3.2"

services:
  books-postgres:
    image: books/postgres
    build:
      context: ../books-postgres
    ports:
      - 5432:5432
  books-api:
    image: books/api
    build:
      context: ../books-api
    environment:
      - spring.datasource.url=jdbc:postgresql://books-postgres:5432/apibook
    depends_on:
      - books-postgres
    ports:
      - 8080:8080
  books-gui:
    image: books/gui
    build:
      context: ../books-gui
    depends_on:
      - books-api
    volumes:
      - /home/elkouhen/dev/meltingpoc/books-gui:/usr/share/nginx/html
    ports:
      - 80:80